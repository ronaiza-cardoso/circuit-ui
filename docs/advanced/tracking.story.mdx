import { Meta, Intro, Story } from '../../.storybook/components';

<Meta title="Advanced/Built-in Tracking" />

# Built-in Tracking

<Intro>
  Working along with{' '}
  <a href="https://github.com/sumup-oss/collector">Collector</a>, interactive
  components in Circuit UI comes along with a built-in tracking method. When a
  user interacts on components like Button, Tag or Hamburger, Circuit UI invokes
  a pre-set dispatch function to trigger tracking event. As part of the tracking
  payload, we sent a set of data includes a label field and a component value to
  your custom tracking service. For more detail of tracking interface, please
  refer to our collector project.
</Intro>

## Configuring tracking dispatch

1. Wrap your application in root level with `TrackingRoot` and provide a dispatch function for your tracking service.
2. Add `TrackingView` to a viewport like a page or a meaningful view in your application. (For more explanation about event schema, please refer to [Schema](https://github.com/sumup-oss/collector#schema) in Collector.)
3. For better data quality, Collector set `label` as a mandatory field. Circuit UI invoke dispatch function only when the component provides a `label` value. To set the `label` field, please pass down this value within tracking property to a component.
4. When a user clicks a button, Circuit UI should invoke the dispatch function with standard event schema.

```jsx
import { TrackingRoot, TrackingView } from '@sumup/collector';

export default function App() {
  const sendTracking = payload => sendGA(payload);

  return (
    <TrackingRoot name="marketing-website" onDispatch={sendTracking)}>
      <TrackingView name="homepage">
        <Button
          tracking={{
            label: 'trackingId', // required
            component: 'button', // optional, Circuit UI uses the lowercase component name by default
            customParameters: { custom1: 'data' }
          }}
        >
          Sign up now
        </Button>
      </TrackingView>
    </TrackingRoot>
  );
}
```
